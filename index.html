<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bible Passage Viewer</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 15px;
    margin: 0;
    background: #f9f9f9;
  }

  h2 {
    margin-top: 0;
    font-size: 20px;
  }

  #controls {
    background: #fff;
    padding: 12px;
    border-radius: 8px;
    box-shadow: 0 0 4px rgba(0,0,0,0.2);
    margin-bottom: 15px;
  }

  label {
    font-weight: bold;
    margin-right: 5px;
  }

  select, input, button {
    margin-top: 8px;
    padding: 6px;
    font-size: 14px;
  }

  #verses {
    line-height: 1.5;
  }

  .verse {
    margin-bottom: 6px;
  }

  .vnum {
    font-weight: bold;
    margin-right: 4px;
  }

  @media(max-width:600px){
    #controls { display:flex; flex-direction:column; }
    input, select, button { width: 100%; margin-top:6px; }
  }
</style>
</head>

<body>

<h2>Bible Passage Viewer</h2>

<div id="controls">
  <label>Translation:</label>
  <select id="translation">
    <option value="BSB">BSB – Berean Standard Bible</option>
    <option value="KJV">KJV – King James Version</option>
    <option value="WEB">WEB – World English Bible</option>
  </select>

  <label>Book:</label>
  <input id="book" value="John">

  <label>Chapter:</label>
  <input id="chapter" type="number" value="1" min="1">

  <button onclick="loadPassage()">Load</button>
</div>

<div id="verses">Enter a passage and click Load.</div>

<script>
// OSIS-style book codes
const BOOK_CODES = {
  "GENESIS":"GEN","EXODUS":"EXO","LEVITICUS":"LEV","NUMBERS":"NUM","DEUTERONOMY":"DEU",
  "JOSHUA":"JOS","JUDGES":"JDG","RUTH":"RUT","1 SAMUEL":"1SA","2 SAMUEL":"2SA",
  "1 KINGS":"1KI","2 KINGS":"2KI","1 CHRONICLES":"1CH","2 CHRONICLES":"2CH","EZRA":"EZR",
  "NEHEMIAH":"NEH","ESTHER":"EST","JOB":"JOB","PSALMS":"PSA","PROVERBS":"PRO",
  "ECCLESIASTES":"ECC","SONG OF SOLOMON":"SNG","ISAIAH":"ISA","JEREMIAH":"JER","LAMENTATIONS":"LAM",
  "EZEKIEL":"EZK","DANIEL":"DAN","HOSEA":"HOS","JOEL":"JOL","AMOS":"AMO","OBADIAH":"OBA",
  "JONAH":"JON","MICAH":"MIC","NAHUM":"NAM","HABAKKUK":"HAB","ZEPHANIAH":"ZEP",
  "HAGGAI":"HAG","ZECHARIAH":"ZEC","MALACHI":"MAL",
  "MATTHEW":"MAT","MARK":"MRK","LUKE":"LUK","JOHN":"JHN","ACTS":"ACT","ROMANS":"ROM",
  "1 CORINTHIANS":"1CO","2 CORINTHIANS":"2CO","GALATIANS":"GAL","EPHESIANS":"EPH",
  "PHILIPPIANS":"PHP","COLOSSIANS":"COL","1 THESSALONIANS":"1TH","2 THESSALONIANS":"2TH",
  "1 TIMOTHY":"1TI","2 TIMOTHY":"2TI","TITUS":"TIT","PHILEMON":"PHM","HEBREWS":"HEB",
  "JAMES":"JAS","1 PETER":"1PE","2 PETER":"2PE","1 JOHN":"1JN","2 JOHN":"2JN","3 JOHN":"3JN",
  "JUDE":"JUD","REVELATION":"REV"
};

async function loadPassage(){
  const translation = document.getElementById("translation").value;
  const rawBook = document.getElementById("book").value.trim().toUpperCase();
  const chapter = document.getElementById("chapter").value;
  const versesDiv = document.getElementById("verses");

  const bookCode = BOOK_CODES[rawBook];
  if(!bookCode){
    versesDiv.innerHTML = "<strong>Error:</strong> Unknown book name.";
    return;
  }

  // Use a free CORS proxy
  const apiUrl = `https://api.allorigins.win/raw?url=${encodeURIComponent(`https://bible.helloao.org/api/${translation}/${bookCode}/${chapter}.json`)}`;

  versesDiv.innerHTML = "<em>Loading…</em>";

  try{
    const response = await fetch(apiUrl);
    if(!response.ok) throw new Error("Passage not found.");

    const data = await response.json();
    versesDiv.innerHTML = "";

    data.chapter.content.forEach(entry=>{
      if(entry.type==="verse"){
        const div = document.createElement("div");
        div.className="verse";

        const vnum = document.createElement("span");
        vnum.className="vnum";
        vnum.textContent = entry.number;

        const text = document.createElement("span");
        text.textContent = " " + entry.content.join(" ");

        div.appendChild(vnum);
        div.appendChild(text);
        versesDiv.appendChild(div);
      }
    });
  }catch(err){
    versesDiv.innerHTML = "<strong>Error:</strong> "+err.message;
  }
}
</script>

</body>
</html>
